<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>分类: 运维 - 调律者</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="调律者"><meta name="msapplication-TileImage" content="/static/img/avatar.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="调律者"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="160x160" href="/static/img/avatar.jpg"><meta property="og:type" content="blog"><meta property="og:title" content="调律者"><meta property="og:url" content="http://www.zzmark.top/"><meta property="og:site_name" content="调律者"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.zzmark.top/img/og_image.png"><meta property="article:author" content="Mark Zhou"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><meta property="twitter:creator" content="@Zz_Mark06"><meta property="twitter:site" content="https://twitter.com/Zz_Mark06"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.zzmark.top"},"headline":"调律者","image":["http://www.zzmark.top/img/og_image.png"],"author":{"@type":"Person","name":"Mark Zhou"},"description":""}</script><link rel="icon" href="/static/img/avatar.jpg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.4.2/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?c3e99bfff793bb7f4d6646bc513afec5";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-154883003-1" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-154883003-1")</script><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-5036449195935522" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="调律者" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/static/img/avatar.jpg" alt="调律者" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">运维</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/07/id_708295649/"><img class="fill" src="/gallery/2.png" alt="TIME_WAIT 过高排查记录"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-07-27T08:11:45.000Z" title="2020-07-27T08:11:45.000Z">2020-07-27</time>发表</span><span class="level-item"><time datetime="2020-07-27T08:11:45.000Z" title="2020-07-27T08:11:45.000Z">2020-07-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">11 分钟读完 (大约1637个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/07/id_708295649/">TIME_WAIT 过高排查记录</a></h1><div class="content"><p>线上服务器遇到了 TIME_WAIT 很高的情况，虽然服务没什么问题，机器剩余的配置很大(总计占用还不足机器的五分之一)，不过这问题很可能成为隐患，所以排查了一番，记录如下：</p><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><ol><li><p>TIME_WAIT 的来源</p><img src="/2020/07/id_708295649/1.png" title="TCP三次握手、四次挥手"><p>TCP 的三次握手、四次挥手，<br>常用的三个状态是：<code>ESTABLISHED</code> 表示正在通信，<code>TIME_WAIT</code> 表示主动关闭，<code>CLOSE_WAIT</code> 表示被动关闭<br>三次握手：<br>第一次，主动端发送<code>SYN</code>给 <code>LISTEN</code> 中的被动端，自己切换至 <code>SYN-SENT</code> 状态；<br>第二次，被动端发送<code>ACK</code>确认收到信号和<code>SYN</code>；<br>第三次，主动端发送<code>ACK</code>确认收到被动端<code>SYN</code>。<br>完成上述动作后，两端进入enblished</p><p>四次挥手中，<br>第一次是主动端断开，发送<code>FIN</code>信号，切换至<code>FIN-WAIT-1</code>状态；<br>第二次是被动端收到<code>FIN</code>信号，切换至<code>CLOSE-WAIT</code>状态，然后发送<code>ACK</code>至主动端，主动端收到后切换至<code>FIN-WAIT-2</code>；<br>第三次是被动端等自己的应用断开连接时，发送<code>FIN</code>信号给主动端，被动端切换至<code>LAST-ACK</code>；<br>第四次是主动端收到被动端的<code>FIN</code>信号，然后发送<code>ACK</code>信号，切换至<code>TIME-WAIT</code>状态，等待内核回收。</p></li></ol><h2 id="百度带来的坑"><a href="#百度带来的坑" class="headerlink" title="百度带来的坑"></a>百度带来的坑</h2><p>随手搜索问题之后，无论是 baidu 还是 google，搜到的大量内容，都是叫你优化 <code>net.ipv4</code> 这种治标不治本的方法，什么加快 TIME_WAIT 回收啊，增大量级啊</p><p>但是，问题的来源并没有解决，以往的经验表明，这么调整或许能解决问题，但连接反复开闭产生的资源消耗依然很大</p><h2 id="定位-TIME-WAIT-原因"><a href="#定位-TIME-WAIT-原因" class="headerlink" title="定位 TIME_WAIT 原因"></a>定位 TIME_WAIT 原因</h2><p>根据 TCP 握手规则，谁有<code>TIME-WAIT</code>，谁就是主动端。这点可以排除用户频繁访问或错误的释放连接的可能。</p><p>意思就是说这都是服务器主动请求断开连接的，而<code>TIME-WAIT</code>状态的链接也没有回收。</p><p>服务端可能产生的请求，也就只有服务间互相调用、访问第三方 API、反向代理</p><p>其实到这里已经快要破案了，要么是程序的 bug，要么是反向代理配置带来的大量 TIME_WAIT</p><p>接下来就是具体定位，连接到底是谁产生的了。</p><h3 id="拓扑"><a href="#拓扑" class="headerlink" title="拓扑"></a>拓扑</h3><p>目前线上很精简，只有一台机器，使用 docker 作为业务容器，外侧 nginx 做入口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">              (docker)</span><br><span class="line">       |-----------------|</span><br><span class="line">nginx -&gt; traefik -&gt; api</span><br><span class="line">       |-----------------|</span><br></pre></td></tr></table></figure><p>nginx 持有 80 443 端口，traefik 通过 12500 暴露到主机，docker内的服务不对主机暴露端口</p><p>为啥这么设计？</p><p>Let’s encrypt 的证书最近因 akamai 被墙导致 OCSP 无法执行，iOS 端首次请求会等待数秒钟，这对于用户不可接受，而我们又没有购买证书或者更换国内证书的打算(子域名有点多，申请起来太累，还是 acme.sh 来得爽)(还是穷的)</p><p>然而 traefik 并不能处理 <code>OCSP stapling</code>，只好让 nginx 扛起 <code>https</code> 的大任</p><h3 id="命令排查"><a href="#命令排查" class="headerlink" title="命令排查"></a>命令排查</h3><p>(因为执行时的命令结果没有保存，所以这里只有看出情况的命令行了)</p><p>查看 TIME_WAIT 属于哪个连接</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tn|grep TIME_WAIT|awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>|sort|uniq -c|sort -nr|head</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@m ~]# netstat -tn|grep TIME_WAIT|awk &#39;&#123;print $4&#125;&#39;|sort|uniq -c|sort -nr|head</span><br><span class="line">   2703 127.0.0.1:12500</span><br><span class="line">      2 172.17.3.142:3306</span><br></pre></td></tr></table></figure><p>可以看出，<code>127.0.0.1:12500</code> 持有 2703个 TIME_WAIT，这个端口是后端API服务的监听端口。因为 TIME_WAIT 都是主动方持有，也就是说请求是由本机的程序发往后端 API 的，也就是猜测中的第三种-反向代理的请求</p><p>不过这还没法破案，然后是分析请求来源</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ant|grep 127.0.0.1:12500</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@m ~]# netstat -antp|grep 127.0.0.1:12500</span><br><span class="line">tcp        0      0 127.0.0.1:37860         127.0.0.1:12500         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37828         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37748         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37782         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37728         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37802         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37864         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37720         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37770         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37844         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37810         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37852         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37752         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37742         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37870         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37832         TIME_WAIT  -</span><br><span class="line">tcp6       0      0 127.0.0.1:12500         127.0.0.1:37762         TIME_WAIT  -</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>因为都在本地，这命令下去根本看不出啥来<br>如果是外来请求，或者其他 ip 的请求，那么后方的 127.0.0.1 就会显示那一方的 ip</p><p>如果运气好，能看到 127.0.0.1:12500 在后边，也就是第五个参数位置，那么可以尝试翻一翻是否有最后一个参数，若 TIME_WAIT 占比不是特别绝望，应该能看到几个。<br>而这几个很有可能就是发起者。也算是种猜测了。</p><p>到这里我也没什么排查手段了，因为请求来源是 127.0.0.1，不好确认是哪里来的请求。<br>这也就是单节点带来的痛苦……</p><p>不过按照前面的线索，nginx 的可能性很大</p><h2 id="nginx-带来的-TIME-WAIT"><a href="#nginx-带来的-TIME-WAIT" class="headerlink" title="nginx 带来的 TIME_WAIT"></a>nginx 带来的 TIME_WAIT</h2><ol><li><p>导致 nginx端出现大量TIME_WAIT的情况有两种：</p><p>keepalive_requests设置比较小，高并发下超过此值后nginx会强制关闭和客户端保持的keepalive长连接；（主动关闭连接后导致nginx出现TIME_WAIT）<br>keepalive设置的比较小（空闲数太小），导致高并发下nginx会频繁出现连接数震荡（超过该值会关闭连接），不停的关闭、开启和后端server保持的keepalive长连接；</p></li><li><p>解决方案</p><p>对于反向代理，nginx 提供了一个 upstream 的参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream http_backend &#123;</span><br><span class="line">  server 127.0.0.1:12500;</span><br><span class="line">  keepalive 50;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样便能解决问题。</p><p>下面是该参数的相关逻辑以及官方对此的说明：</p><p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive">http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive</a></p></li><li><p>The connections parameter sets the maximum number of idle keepalive connections to upstream servers that are preserved in the cache of each worker process. When this number is exceeded, the least recently used connections are closed.（设置每个 worker 进程保留与上游服务器的 keepalive 连接最大数量。超过此数量时，将关闭最近最少使用的连接。）</p></li><li><p>It should be particularly noted that the keepalive directive does not limit the total number of connections to upstream servers that an nginx worker process can open.（特别提醒：keepalive指令不会限制一个nginx worker到 upstream 连接的总数量）</p></li></ol></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-12-23T16:00:00.000Z" title="2018-12-23T16:00:00.000Z">2018-12-24</time>发表</span><span class="level-item"><time datetime="2018-12-23T16:00:00.000Z" title="2018-12-23T16:00:00.000Z">2018-12-24</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">3 分钟读完 (大约438个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/12/migration-to-caddy/">博客更换至caddy</a></h1><div class="content"><p>最近想要搞一个下载文件的页面，又不想自己写前端，nginx 的 autoindex 太难看，想要使用 fancyindex 却还需要编译 nginx 才能开启这功能，目前在 docker 上懒得自己搞，想起了 caddy 这个东西带这个功能并且还算看得过去，就有想法去搞 caddy。</p><h3 id="before"><a href="#before" class="headerlink" title="before"></a>before</h3><p>CentOS7 docker，nginx 使用了官方 docker 镜像</p><p>暴露80、443端口，挂载本地文件夹，网页内容放在本地，配置方面也只是设置了 <code>http -&gt; https</code>，还有 <code>TLS</code> 证书，证书使用 <code>Let&#39;s Encrypt</code> 通配符证书，开启 http2，算法方面该默认都默认没有什么特殊的</p><h3 id="after"><a href="#after" class="headerlink" title="after"></a>after</h3><p>CentOS7 docker，caddy 使用了 <a target="_blank" rel="noopener" href="https://hub.docker.com/r/abiosoft/caddy">abiosoft/caddy</a></p><p>暴露80、443端口，挂载本地文件夹，使用 caddy/git 插件拉取 github 仓库内容，方便日后更换博客前端，也方便当前 hexo 内容同步，稍后把 github 的 homepage 改到自己的域名上</p><p>caddy 配置了自动的 TLS 证书，默认开启 http2 (不过在我浏览器上，http2并没有生效，SSLlabs倒是通过了，可能本地环境问题)，默认使用 TLS 1.2，想要使用 TLS 1.3 需要自行编译 golang 运行环境，想要启动 QUIC 需要手动加一个启动指令，不过这个 docker image 没提供这个，想搞就要自行 build 一个，或许过几天手痒痒就去搞起。</p><h3 id="赠品"><a href="#赠品" class="headerlink" title="赠品"></a>赠品</h3><p>caddy 的文档，建议去看官方文档，英文也没几个词翻翻字典就当学英语了</p><p><a target="_blank" rel="noopener" href="https://caddyserver.com/docs">官方文档</a><br><a target="_blank" rel="noopener" href="https://dengxiaolong.com/caddy/zh/">中文翻译文档-旧</a></p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-03-14T16:00:00.000Z" title="2018-03-14T16:00:00.000Z">2018-03-15</time>发表</span><span class="level-item"><time datetime="2018-03-14T16:00:00.000Z" title="2018-03-14T16:00:00.000Z">2018-03-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">几秒读完 (大约101个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/03/lets-encrypt-wildcard/">Let&#039;s Encrypt 通配符证书</a></h1><div class="content"><p>3月14日，Let’s Encrypt终于开通了通配符(wildcard)证书的申请。其实这个东西没什么好记录的，无非就是打开工具申请证书，通过DNS验证域名所有权，也算是体验下通配符的省力了，直接覆盖所有二级域名。</p><p>这可能是我写过最短的一篇博文了。</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-02-17T16:00:00.000Z" title="2018-02-17T16:00:00.000Z">2018-02-18</time>发表</span><span class="level-item"><time datetime="2018-02-17T16:00:00.000Z" title="2018-02-17T16:00:00.000Z">2018-02-18</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">7 分钟读完 (大约1060个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/02/acme-sh/">acme.sh配置记录</a></h1><div class="content"><p>实际上这是个很简单又完善的工具，不过官网手册我看了好半天才理解，绕了很大的弯子</p><p>本文基于 CentOS 7 1708, nginx 1.12.2，acme.sh v2.8.0，环境和我的不相符也无所谓，但请不要完全照抄</p><p>文中的域名，均替换为了 example.com，伸手党注意鉴别。</p><p>本博目前使用的是 caddy，并没有用这个脚本，这是公司测试环境使用的东西</p><h2 id="info"><a href="#info" class="headerlink" title="info"></a>info</h2><p>ACME 协议: Automated Certificate Management Environment(自动证书管理环境)<br>acme.sh: 一个自动管理证书的工具，可以用来自动申请和续期 Let’s Encrypt 证书</p><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><p>首先安装工具，一行命令就能搞定，如果想要采用 standalone 模式（也就是不需要现有的web服务器，有80端口就可以申请），还需要安装 socat，使用包管理工具一行命令就能搞定 ，不过我用不到就没有装这个。</p><p>安装命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  https:&#x2F;&#x2F;get.acme.sh | sh</span><br></pre></td></tr></table></figure><p>安装好后，重新登陆 ssh 让 alias 生效，可以使用 acme.sh 这个指令，方便操作</p><p>安装会写入一条 crontab 定时任务，这就是迷惑人的重点，稍后讲。</p><h2 id="注册-issue"><a href="#注册-issue" class="headerlink" title="注册(issue)"></a>注册(issue)</h2><p>工具的用词是 <code>issue</code>，用语和 Let’s Encrypt 对应。在这个工具上，我最终的理解就是注册，有对 nginx 的特殊配置，不会更改配置文件（最终），需要80端口直通（公网ip:80对应机器:80），如果有特殊需求，比如映射端口，那应该是可以的，不过没找到直接描述的手册</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d example.com --nginx</span><br></pre></td></tr></table></figure><p>这个语句会注册这个任务，并当即申请一个证书，托管到自己的文件夹下</p><h2 id="发布-nginx-reload"><a href="#发布-nginx-reload" class="headerlink" title="发布(nginx reload)"></a>发布(nginx reload)</h2><p>以下指令，会注册一个任务，任务会将证书发布到指定位置，执行任务所设置的 reload 命令。</p><p>nginx 使用的证书需要有完整的证书链，手动处理的话，就是将 CA.cer 和 domain.cer 按照顺序拼装起来，不过这个工具提供了自动手段，配置即可，命令一眼就能看懂不多说。</p><p>因为他不会改变 nginx 的配置，所以说发布证书之后，如何使用证书需要自行配置，这个上网找就可以了，不难。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --installcert -d example.com --key-file /etc/ssl/www/example.com.key --fullchain-file /etc/ssl/www/example.com.cer --reloadcmd <span class="string">&quot;service nginx force-reload&quot;</span></span><br></pre></td></tr></table></figure><h2 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h2><p>这个工具最迷惑人的地方就是他那全自动的系统，那两个步骤执行语句的时候都是当即生效，让人觉得自己要手动执行，甚至考虑要怎么设置定时来执行这两句话，实际上这两句话执行的逻辑是注册，将任务注册到 acme.sh 工具上，然后利用安装时候设定好的 acme.sh 定时任务来执行已注册的任务，所以说实际上只需要执行一次，日后的动作都是全自动的。</p><p>为什么当即生效，就理解成添加任务的时候需要一个初始化状态吧</p><h2 id="另一个坑"><a href="#另一个坑" class="headerlink" title="另一个坑"></a>另一个坑</h2><p>在自己的测试环境上，这样就算完成了，但是实际环境上又遇到了一个问题</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Verify error:Invalid response from http:&#x2F;&#x2F;example.com&#x2F;.well-known&#x2F;acme-challenge&#x2F;8VdhXwwueFAe6lqmCpNDtESnkoWiTjhK6afT_nE8hoQ:</span><br></pre></td></tr></table></figure><p>怀疑了一圈，最后发现，我们的 http 使用了 rewrite 跳转到 https 的，导致了acme.sh 的配置无法正确更改，有人提出了 <a target="_blank" rel="noopener" href="https://github.com/Neilpang/acme.sh/issues/1115">issue</a> 但到现在还没有什么措施</p><p>所以放弃了使用 –nginx 指令，改用 –webroot 指令，不过这个是否成功，得等过一阵子才能知道，因为写这个说明的时候，提示了这个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">www.example.com is already verified, skip http-01.</span><br></pre></td></tr></table></figure><p>可能 Let’s Encrypt 那边有缓存吧，无法得知是不是真的好用了</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-01-14T16:00:00.000Z" title="2018-01-14T16:00:00.000Z">2018-01-15</time>发表</span><span class="level-item"><time datetime="2018-01-14T16:00:00.000Z" title="2018-01-14T16:00:00.000Z">2018-01-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">4 分钟读完 (大约576个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/01/ssl-cert/">SSL证书配置</a></h1><div class="content"><p>最近给自己的域名弄了SSL证书，却也不难，Let’s Encrypt的证书，免费，几分钟就可以弄下来。<br>至于SSL证书是什么、DV证、申请证书的方法很多这里不做讲解，想知道的话，百度就行了（这种问题都不必去问谷歌）。</p><p>接下来说下我遇到的一些问题</p><p>首先我的证书是使用<a target="_blank" rel="noopener" href="https://www.sslforfree.com/">www.sslforfree.com</a> 申请的Let’s Encrypt，nginx做静态服务器，下发的压缩包中有三个文件，分别为ca中间证、域名证书、私钥</p><ul><li>ca_bundle.crt</li><li>certificate.crt</li><li>private.key</li></ul><p>直接将域名证书 certificate.crt 配置后，能通过浏览器，但是使用curl无法通过，报错为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl: (60) SSL certificate problem: unable to get local More details here: https:&#x2F;&#x2F;curl.haxx.se&#x2F;docs&#x2F;sslcerts.html</span><br></pre></td></tr></table></figure><p>这个错误的原因基本就是，CA里没有根证书或者没有中间某层的证书（不晓得浏览器为啥没事）</p><p>此时使用openssl验证</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_client -host &lt;host&gt; -port 443</span><br></pre></td></tr></table></figure><p>会在前几行出现这个错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verify error:num&#x3D;20:unable to get local issuer certificate</span><br></pre></td></tr></table></figure><p>还有这个</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verify error:num&#x3D;21:unable to verify the first certificate</span><br></pre></td></tr></table></figure><p>这两条和上面一样，不过理由明确了，无本地证书，无法验证当前证书，也就是说我缺少一个证书。。。（还是不知道缺哪个）</p><p>仔细观察证书信息，web的证书有一层中间证，在申请之后也随压缩包下发了，即 ca_bundle.crt，使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl verifly &lt;file&gt;</span><br></pre></td></tr></table></figure><p>验证两个证书，发现ca_bundle可以通过，而web会显示缺少上级证书</p><p>问题明确了，验证的链路上缺少的就是这个中间证（verify可以验证当前证书能否通过验证，若缺少证书即签署该证的证书不存在）</p><p>然后我们将两个证书装在一起，构成证书链，注意顺序</p><p>nginx启动时出现这个错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X509_check_private_key:key values mismatch</span><br></pre></td></tr></table></figure><p>这个错误即当前证书无法验证，大多数都出现于拼装证书时顺序错了，调整下顺序即可。</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-08-25T16:00:00.000Z" title="2017-08-25T16:00:00.000Z">2017-08-26</time>发表</span><span class="level-item"><time datetime="2017-08-25T16:00:00.000Z" title="2017-08-25T16:00:00.000Z">2017-08-26</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">5 分钟读完 (大约785个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/08/ajax-cors-options/">AJAX在跨域时请求OPTIONS</a></h1><div class="content"><p>这个问题早就遇到了，今天又一次遇到而且需要用另一个角度去解决，所以写下来这些总结</p><p>AJAX 是个很方便的东西，不过工具性能越好，就会越难以控制，AJAX 就有着种种安全相关的问题，所以浏览器对此做了诸多限制，这些限制也对我们编写带来了一定的约束和限制</p><p>最常见的问题应该就是跨域问题，老的解决方法有 <code>iframe</code>, <code>jsonp</code>，但是这两个方法前者有着很大的安全隐患，后者并没有规范标准，很多地方并不兼容而且需要后端对数据做特殊的处理。</p><p>如今有了新的 <code>CORS</code> 来解决，十分简单稳定，不过对古董浏览器的兼容性差，在这里不讨论。</p><p>先说 CORS 复杂请求的问题：</p><p>AJAX 请求可以分为简单请求和复杂请求（依照AJAX请求时是否会触发OPTIONS请求来划分，并非 http 规范的称呼）</p><p>简单请求需要符合下列三种要求</p><ol><li>请求类型为 Get Post</li><li>请求的Content-Type为下列三种之一<ul><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain</li></ul></li><li>HTTP请求的头部信息不超过这几种字段<ul><li>Accept</li><li>Accept-Language</li><li>Content-Language</li><li>Last-Event-ID</li><li>Content-Type</li></ul></li></ol><p>简单请求，浏览器可以直接发送</p><p>具体来说就是自动在头部信息中自动增加一个 Origin 字段用来说明本次请求的源（协议、域名、端口）</p><p>如果服务器不允许这个源，则返回结果的 Header 中不包括 <code>Access-Control-Allow-Origin</code>，浏览器没有找到 <code>Access-Control-Allow-Origin</code> 则会让这次请求失败，若允许则返回正常结果集并多出几个字段：</p><ol><li><code>Access-Control-Allow-Origin</code> 必须。返回 Origin 字段的值</li><li><code>Access-Control-Allow-Credentials</code> 是否允许包含 Cookie</li><li><code>Access-Control-Expose-Headers</code> 默认情况下，AJAX 只能拿到上标准的 header，若需要其他的值则需要这个属性指定，否则无法通过验证</li></ol><p>复杂请求，浏览器会先发送一个 OPTIONS 请求，该请求服务器应返回一个 HTTP 204，携带<code>Access-Control-Allow-Origin</code>，同上如果不存在则不允许</p><p>复杂请求的OPTIONS可能会返回以下字段：</p><ol><li><code>Access-Control-Allow-Methods</code> 必须。返回支持的HTTP请求方法</li><li><code>Access-Control-Allow-Origin</code> 必须。返回Origin字段的值</li><li><code>Access-Control-Allow-Headers</code> 如果请求中包含该字段，则返回时必须有该字段。表明服务器支持的所有头信息字段</li><li><code>Access-Control-Max-Age</code> 用来指定本次预检请求的有效期，单位为秒</li><li><code>Access-Control-Allow-Credentials</code> 是否允许包含Cookie</li></ol><p>这些东西，结合返回头部来看会更好，但是目前我没有很好的抓包手段（我指的是抓服务器传入值），等找到更好的抓包方法再进行补充。</p></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2017-07-13T16:00:00.000Z" title="2017-07-13T16:00:00.000Z">2017-07-14</time>发表</span><span class="level-item"><time datetime="2017-07-13T16:00:00.000Z" title="2017-07-13T16:00:00.000Z">2017-07-14</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span><span class="level-item">几秒读完 (大约76个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/07/move-to-hexo/">迁移至Hexo</a></h1><div class="content"><p>前阵子自己用Vue.js写了一个博客，自己火候还是不太够，写的很不满意</p><p>无奈还是搬回了Hexo，迁移的时候索性时间都复制了过来</p><p>先用着吧，有时间把前端再拿起来，重新写一份</p></div></article></div></div><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/af01413b547f9ea694fb1d5b513c63b9?s=128" alt="Mark Zhou"></figure><p class="title is-size-4 is-block" style="line-height:inherit">Mark Zhou</p><p class="is-size-6 is-block">keep simple</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>北京</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">25</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ZzMark" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ZzMark"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/Zz_Mark06"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">四月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">二月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">八月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">七月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/04/"><span class="level-start"><span class="level-item">四月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Blog/"><span class="tag">Blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Iot/"><span class="tag">Iot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nuxt-js/"><span class="tag">Nuxt.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SEO/"><span class="tag">SEO</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSR/"><span class="tag">SSR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue-js/"><span class="tag">Vue.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/caddy/"><span class="tag">caddy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ide/"><span class="tag">ide</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/meta/"><span class="tag">meta</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spring/"><span class="tag">spring</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tomcat/"><span class="tag">tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vscode/"><span class="tag">vscode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%8E%E7%AB%AF/"><span class="tag">后端</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%8E%AF%E5%A2%83/"><span class="tag">环境</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%90%E7%BB%B4/"><span class="tag">运维</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5036449195935522" data-ad-slot="5036449195935522" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/static/img/avatar.jpg" alt="调律者" height="28"></a><p class="is-size-7"><span>&copy; 2021 Mark Zhou</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent" target="_blank" rel="noopener" title="黑ICP备17001410号" href="https://beian.miit.gov.cn/">黑ICP备17001410号</a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load",()=>{window.cookieconsent.initialise({type:"info",theme:"edgeless",static:!1,position:"bottom-right",content:{message:"此网站使用Cookie来改善您的体验。",dismiss:"知道了！",allow:"允许使用Cookie",deny:"拒绝",link:"了解更多",policy:"Cookie政策",href:"https://www.cookiesandyou.com/"},palette:{popup:{background:"#edeff5",text:"#838391"},button:{background:"#4b81e8"}}})})</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load",()=>{"function"==typeof $.fn.lightGallery&&$(".article").lightGallery({selector:".gallery-item"}),"function"==typeof $.fn.justifiedGallery&&($(".justified-gallery > p > .gallery-item").length&&$(".justified-gallery > p > .gallery-item").unwrap(),$(".justified-gallery").justifiedGallery())})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",(function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"分类",tags:"标签"})}))</script></body></html>