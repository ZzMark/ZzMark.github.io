---
title: 电脑上不了网的排查思路
date: 2020-07-27 16:20:07
categories:
 - 日常
toc: true
---

最近总有连不上网瞎搞然后问我连不上网了怎么办(只说连不上，却不清楚哪里连不上，你就算说一句网页打不开了都行啊)

所以写下了这个排查思路

如果稍微懂一点命令行，知道 cmd 怎么打开怎么敲，可以直接去进阶版本，排查更快

## 基础版

- 是否连上了物理网络，就是网线、wifi
  > 这都无法保证，你是怎么舔个脸说自己网不好使的呢

- 检查是否有 ip 地址
  > 具体方法，拿手机自行百度，操作系统不同位置不同，懒得讲

- 如果是 wifi，用手机连上同一个网络试试，记得把手机流量开关给关上，不然会开着 wifi 却从流量上网，影响判断
  > 如果手机不能用，那么问题就在于这个网本来就不能用，自己家的话，打电话给宽带公司让他们上门修吧

- 打开网页，输入 www.baidu.com

- 若无法访问，输入 http://123.207.151.189 (这是我的地址)，注意标点，只要看到 `404 Site 123.20xxxxxxx`就算成功
  > 如果直接访问数字地址成功，但 www.baidu.com 失败，可能是 dns 服务配置有误，那么重启个电脑或者等上几分钟或许自己就会好。没好的话，可能真的是配置不对；如果自己不知道什么时候配置了这东西，怀疑电脑坏了吧

- 若无法访问，可能电脑出了问题，请思考是不是用了什么奇怪的软件

## 进阶版

注意：该思路需要敲命令行，如果连 cmd 都不知道怎么打开，就参考上面的基础版本吧

思路如下：
 - 保证物理连接
 - 保证有正确的 ip
 - 电脑到网关是通的
 - 绕过 dns 环节，可访问纯数字地址
 - 测试 dns

就这几个步骤，其中物理连接，自己看网卡状态好了

- 保证有正确的 ip

  cmd 输入 `ipconfig`，能看到类似于下文的内容，可能会有很多条，也可能名字和我对不上，地址和我对不上，那都不重要。

  ```bat
  ipconfig

  以太网适配器 以太网:

    连接特定的 DNS 后缀 . . . . . . . :
    本地链接 IPv6 地址. . . . . . . . : fe80::48c1:413e:ee4b:1b35%9
    IPv4 地址 . . . . . . . . . . . . : 192.168.3.56
    子网掩码  . . . . . . . . . . . . : 255.255.255.0
    默认网关. . . . . . . . . . . . . : 192.168.3.1
  ```

- 电脑到网关是通的

  上一步结果中，默认网关对应的地址，作为这步的参数

  cmd 输入 `ping 192.168.3.1`，把 192.168.3.1 更换为自己的默认网关

  正常结果如下：
  ```bat
  >ping 192.168.3.1

  正在 Ping 192.168.3.1 具有 32 字节的数据:
  来自 192.168.3.1 的回复: 字节=32 时间<1ms TTL=64
  来自 192.168.3.1 的回复: 字节=32 时间=1ms TTL=64
  来自 192.168.3.1 的回复: 字节=32 时间<1ms TTL=64
  来自 192.168.3.1 的回复: 字节=32 时间<1ms TTL=64

  192.168.3.1 的 Ping 统计信息:
      数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
  往返行程的估计时间(以毫秒为单位):
      最短 = 0ms，最长 = 1ms，平均 = 0ms
  ```

  如果长得不像(别问不像到什么程度，都是中文，一眼就能看出有问题来)，那么这一步骤失败，电脑可能出现网卡驱动问题，或者IP地址并不正确

  不过这个不够准确，因为有可能路由器(网关)禁止了 ping 命令，所以无论怎样，都应当进行下一步

- 绕过 dns 环节，可访问纯数字地址

  直接用浏览器打开 123.207.151.189，不报错就算成功

  如果失败，证明网是断的。

  网关能通，网却是断的，问题在上游，该找宽带报修就报修吧

- 测试 dns

  直接访问 www.baidu.com，如果没通，证明 dns 出了问题

  可以尝试更换 dns，但别忘了测试后换回来

  更换 dns 方法，自行百度

  建议 223.5.5.5 阿里

- dns 也没问题的情况

  那么，你到底是怎么得出网不好使的呢
