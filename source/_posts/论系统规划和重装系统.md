---
title: 论系统规划和重装系统
date: 2021-01-07 13:52:01
updated:
tags:
categories:
cover: /gallery/windows10下载.png
thumbnail: /gallery/windows10下载.png
---

> 本文写自 2020-12-28 日，后半的内容都是在讲故事，重点都在前面
  里面的图不是同一台电脑截出来的，不要挑刺

文字极多，我不太会做教程那种啰嗦东西，随便看吧

---

如今已经 2020 年了，坚持 xp 天下第一的，建议你去看看医生，让医生纠正一下你的 xp 系统

坚持 win7 天下第一的，如果能说出三个你日常使用下 win7 能做，win10 不能做的东西，那么只有两种情况

1. 你的使用场景真的离不开 win7
2. 你对系统的理解已经超越了我

以上两种，我都建议右上角关闭这个页面，不要浪费彼此的时间

以下内容，全都是基于 `GPT分区` `UEFI引导` `windows 10` `非LSTC版本`，如果你不知道其中的是啥，可以无视，确保你的电脑是2012年(intel 初代i3/i5/i7, amd AM3插槽)后出产的型号就行

## 辟谣

> 如今互联网十分发达，获取知识的成本也变得低廉。
  但验证言论的成本越发变高，所以谣言总使比真话传得更快更广，更深得人心

首先，让我们辟几个谣，以下几点，都是错的

1. 软件不能装 C 盘，系统会变慢
1. 装系统时候，要分 CDEF 四个区，系统，软件，游戏，文档要分开放，玩游戏把硬盘弄坏了另外两个分区也不会受损
1. 不装杀毒软件，就该中病毒了；不装安全软件，就不安全了
1. 你这 Chrome 是美国的，不安全，咱们中国人得用中国的产品
1. 自动更新总是让我电脑关不了机/总使提示我重启/更新后游戏就没法玩了/每次都更新失败，开着也没用

这……您还在用番茄花园吗，2020年了，不是2002年

来，一条条辟谣

1. 软件装在哪里，速度都是一样的，速度不一样，只可能是你的硬盘有问题
1. 真要是硬盘弄坏了，只可能整个硬盘都挂掉，管你什么CDEFG分区都会死
1. 不安装杀毒软件，确实风险挺大，但现在 win10 送的杀毒很猛，完全不用操心。

    - 当然，防君子不防小人，你直接给了某个恶意软件超高的权限，还是会死
    - 防小人不放手欠的，你自己关掉了各种更新，遇到漏洞入侵然后说不安全，那也无能为力

1. 国产……十年前国产车还是低端的代名词。国产浏览器，内核都和 chrome 一样，人家反而是 origin ，只是有一个国产皮肤罢了

    - 严重批评 某60安全浏览器，浏览器整会员，把本应有的功能包装成会员专享，实在是软件工程的典范
    - 国产自主研发，红芯浏览器，最终也是个换皮产品
    - [自主研发一款浏览器内核的难度到底有多大？ - 罗志宇的回答 - 知乎](https://www.zhihu.com/question/290564335/answer/472165753)
1. 面对这种人，只能说微软实在太好心了，老掉牙的危险版本依然能让你用，你看看 iOS，看看 Mac X OS，不更新用个鸡儿。

    您信任那些安全软件的漏洞修复，却不信任最了解这系统的人给你提供的安全更新，您对操作系统的理解远超微软，您可以给微软发个邮件，探讨一下。

## 分区规划

![128固态 + 500g机械，剩余量做了其他用途](1.png)

我个人是不太喜欢分区的，反正分了区，也不会让文件变整洁，还要去区分哪个分区怎么用，想想就头疼。

但我个人还是拒绝单分区的，推荐将操作系统分离开来。
这样重装系统时，可以减少备份的考虑，反正重装了系统，软件也是要重装的，自己的文件绕开C盘就好了

思路很明确，
 - 100g~200g 系统分区
 - 固态有剩余，分配个固态的分区
 - 剩下的一个分区一块盘

接下来都是个人见解，大体上区分成了几种情况，思路都是一致的

- 128g 固态

  就这么点地方，您还是别瞎折腾了

- 128g/256g 固态 + 机械硬盘

  这种场景我的分法是，
  C(128g 固态), D(机械)

- 512g/1t/2t固态 + 机械硬盘

  C(128g 固态), D(剩余的固态), E(机械)

- 多块固态

  方案1：适合大众。系统盘给操作系统上100~200G，剩下的分给一个分区，其他固态每个固态一个分区

  方案2：跨区卷走起，当然，别存重要资料，小心集体爆炸

说说理由，其实上面都已经说过了

- win10 大概给 100g 以上就差不多够用，虽然经常看到C盘占用率到80%，不过无所谓，煮不在乎。软件多的话就多给一些
- 许多软件重装系统也必须重装，所以没必要非得绕开C盘
    - 当然，绿色软件可以放到D盘，或者软件十分的多，不想占用宝贵的固态空间，也可以换个地方
- 我的文档、下载、桌面，记得迁移到非C盘（后面有图）

## 一些使用习惯

1. (推荐) 先把 我的文档、桌面、默认下载文件夹，都移动到其他分区上
    - 在用户文件夹中(找不到的话，Win + R，输入 %USERPROFILE% 就可以了)，找到`桌面`、`文档`、`下载` 等等想要迁移的
    - 右键 - 属性 - 位置，将路径调整好，我个人倾向于维持原有文件夹名称，只改动分区。
    - 确定即可，会提示是否移动文件
    ![属性]](2.png)

1. (推荐) 对于文件管理器，做一些配置。在文件夹选项中

    - 显示隐藏文件，
    - 隐藏系统文件(推荐)
    - 显示文件的扩展名
    - 隐藏文件夹合并通知

    ![推荐的设置](3.png)

1. (建议) 使用平铺这种布局，更容易一眼找到想要的文件。我个人是不喜欢 windows vista 之后将列表设置为默认的。选择一个文件夹后，文件夹选项 - 查看 - 应用到文件夹，可以将这种布局应用到所有同类文件夹

1. (建议) 合并任务栏，默认情况下会始终合并任务栏，很不直观，个人更倾向于使用 `当任务栏已满` 这种，能让打开的东西都显示出来。

    - 具体配置为，任务栏点击右键 - 任务栏设置

    ![当任务栏已满](4.png)


## 重装系统

![现在一些文件都丢到nas里，这也就比较干净了](5.png)

我个人有整理文件的习惯，自己的文件位置都放的比较规整。
对于软件的文件，我倾向于默认位置，比如 maven 的仓库，默认就是 `~/.m2` ，配置文件就在这里，很多东西也容易预料，减少各种配置时要考虑的情况

对于磁盘规划，之前也说过，用户数据(文档、下载、桌面) 都不在C盘种，所以我的电脑可以直接抹掉C盘重装系统，丝毫不用犹豫丢了重要文件

关于安装系统，自从 windows 10 1511 版本以后，MSDN的 iso 内核心的wim文件也超过了 4g，没法直接写iso或者找个u盘随便装，很是麻烦。

但，微软爸爸提供了更加方便的操作，官方工具，插上u盘直接制作安装盘，一键操作，长手就能用，只需要U盘大小大于8G小于32G(其实大于32g也有办法，只不过略微麻烦，小白直接无脑16g就好了)

[下载 Windows 10](https://www.microsoft.com/zh-cn/software-download/windows10)

安装过程全中文，不傻就能看懂。


不过还是说几句，
- 新机器安装系统时，安装阶段只给一个系统分区，避免误操作

- 老机器重装系统时，用磁盘容量来确认是哪个分区，因为那个界面并没有 CDEFG 之类


## 闲谈无聊的过去

> 文章末尾，其实没什么用，讲讲故事了

故事中的那些傻子，我对于装系统这项技能的掌握很早，05年跟着电脑店的师傅学习过，07年自我尝试，09年后半就已经开始用上win7了，那时候还叫开发者预览版（?）

无师自通，师从外行，都是让人绕弯子的东西，但绕过的弯子，也让我对一些常人不去考虑的东西有了很多的理解，不过那些理解，现在眼界专业了，看着就跟玩笑一样

### C盘？其他的盘？有什么区别

以前玩多系统的时候，曾经做过操作系统在 F 盘的情况

当时身边的人很诧异，就问我，你这C盘咋没了呢

当时的情况是这样

- 分区1 win7(C)
- 分区4 win8(F)

切换系统时，将另一个系统的分区隐藏掉。

这是个认知错误，并没有规定系统只能安装到 C，也并没有规定过 C 一定要存在

---

当然，这之后，我把 F 改成了 C，情况更有趣了

- 分区1 win7(C)
- 分区2 (D)
- 分区3 (E)
- 分区4 win8(C)

切换系统时，将另一个系统的分区隐藏掉

有很多人认为，CDEF 就是按照顺序排下来的。实际上，这也只是打了个标签而已，顺序都是随意的

嗯，当时也是震惊了很多身边半懂不懂的人

### 传统引导 - UEFI 过渡 时期的混沌

距今最近的混沌时期，就是 传统引导 - UEFI 过渡的那个时期了

这个过渡期本应是 windows 7 的那个时代，也就是 10 11 12年，在微软的 vista 暴死之后

但那之后，win7 接手，这个系统过于成功，让那个过渡期并没有什么犹豫，多数人都是选择放弃 UEFI 引导的

所以这个过渡期被顺延到了 win8 的时代

首先，win7 可以在 CSM 技术加持下支持 UEFI 引导的，但因激活手段太差(传统引导的 OEM7F7 工具实在是太猛了)，并没有人想用

而且，UEFI 的 win7 也没什么优势，毕竟那会固态还不普及，开机速度更多还是硬盘限制

win7 过于成功，现在还存在 win7天下第一的神教，我都怀疑这波人就是当年吹 xp强于win7的那一群

就因为win7这帮人，到了win8的时代，也就出现了很多麻烦的事情

比如，自认为有两把刷子的小白给win8重装，还想着老一套 Ghost 还原方案，结果发现无法开机，各种翻车。原因在于 win8 出厂都是 UEFI 引导，有些人查到了百度的二手资料，得知要调整为 Legacy boot，但 Bios 里那一项却不让调整，就说电脑垃圾，win8 垃圾。

经历坎坷，关掉了 Security boot，后，装上了 win7，然后发现芯片组驱动不起来，usb不好用，声卡没声音，毕竟win8 的驱动没法给 win7 用，而很多笔记本没提供 win7 驱动，几乎是死局

以前的 PC 有一个叫法，称为 `IBM PC 兼容机`，现在的 PC 规范由多个公司组织联合制定，硬件型号相同，驱动也有很大程度的通用性。
所以这个混沌的年代成功倒退了回去，只要单独安装驱动，就可以让不提供 win7 驱动的 笔记本，安装 win7 操作系统。又不是不能用

### 装系统的本质

这不算是个故事，算是个人理解。

装系统的本质？

1. 解压缩
2. 将解压缩的结果，引导起来

Over.

等等，就这？

没错，就这。

### 谈论引导，以及多系统共存

我对于引导的研究，更多的在于传统引导

那个年代很纯真，启动盘的活动分区的引导扇区，就那么点容量，读取出来执行代码，来决定如何引导操作系统

UEFI 其实更简单粗暴，也更灵活了，

- 第一个 fat/fat32 分区
- /EFI/BOOT/BOOTX64.efi (不区分大小写)(只是默认情况，实际可以根据主板内写入的引导项指向其他文件)

.efi 文件就是个可执行的二进制，电脑按照这之中的代码来决定如何引导操作系统

GPT分区表，并不是必须的


传统引导扇区，就那么点容量，现在的 efi 文件，一两 mb 都是可以的

--- 

多系统共存，难点其实在于规划，只要让多条引导拉起不同的系统，也就实现了共存。
规划要让多个系统的文件分离开，确切说是互相不要产生不可控的影响

当然，最乱的时候，我的电脑里同时躺着4个系统

> win7, xp, ubuntu, mac

ubuntu是干啥的？导出声卡 codec 和 dsdt，以前玩黑果的人都知道

---

传统引导的多系统共存，只需要多个主分区即可，当然因为MBR的限制，最多只有四个分区(所有逻辑分区算一个，但逻辑分区无法引导)
也就是，单硬盘四个可设置活动分区的主分区，就是极限。当然，正常人谁会用到那么多
